<script>
    window.itemOptions = JSON.parse('[{"product_option_id":"242","product_option_value":[{"product_option_value_id":"42","image_value_default":"","image_value_default_thumb":"","image_value":"","image_value_thumb":"","option_value_id":"49","name":"50 мл","image":"http://tonkaperfumes.lo/image/cache/no_image-500x500.png","price":false,"master_option_value":"0","quantity":"9999","price_prefix":"+","master_option":"0"},{"product_option_value_id":"43","image_value_default":"","image_value_default_thumb":"","image_value":"","image_value_thumb":"","option_value_id":"50","name":"220 мл","image":"http://tonkaperfumes.lo/image/cache/no_image-500x500.png","price":"3 000 руб.","master_option_value":"0","quantity":"9999","price_prefix":"+","master_option":"0"}],"option_id":"13","name":"Объём","type":"radio","value":"","master_option":"0","required":"1"},{"product_option_id":"280","product_option_value":[{"product_option_value_id":"118","image_value_default":"","image_value_default_thumb":"","image_value":"","image_value_thumb":"","option_value_id":"70","name":"Тубус 220","image":"http://tonkaperfumes.lo/image/cache/catalog/tubus_black-140x140-500x500.png","price":false,"master_option_value":"50","quantity":"9999","price_prefix":"+","master_option":"13"},{"product_option_value_id":"117","image_value_default":"","image_value_default_thumb":"","image_value":"","image_value_thumb":"","option_value_id":"52","name":"Классика","image":"http://tonkaperfumes.lo/image/cache/catalog/rectangle176-500x500.png","price":false,"master_option_value":"50","quantity":"9999","price_prefix":"+","master_option":"13"},{"product_option_value_id":"116","image_value_default":"","image_value_default_thumb":"","image_value":"","image_value_thumb":"","option_value_id":"53","name":"Белый тубус","image":"http://tonkaperfumes.lo/image/cache/catalog/group300-500x500.png","price":false,"master_option_value":"49","quantity":"9999","price_prefix":"+","master_option":"13"}],"option_id":"14","name":"Упаковка","type":"radio","value":"","master_option":"13","required":"0"},{"product_option_id":"244","product_option_value":[{"product_option_value_id":"51","image_value_default":"catalog/bazar_main.png","image_value_default_thumb":"http://tonkaperfumes.lo/image/cache/catalog/bazar_main-100x100.png","image_value":"catalog/bazar_220_m.png","image_value_thumb":"http://tonkaperfumes.lo/image/cache/catalog/bazar_220_m-100x100.png","option_value_id":"64","name":"Матовая","image":"http://tonkaperfumes.lo/image/cache/catalog/shids/mate-714x550-500x500.png","price":false,"master_option_value":"50","quantity":"9999","price_prefix":"+","master_option":"13"},{"product_option_value_id":"50","image_value_default":"catalog/bazar_50.png","image_value_default_thumb":"http://tonkaperfumes.lo/image/cache/catalog/bazar_50-100x100.png","image_value":"catalog/bazar_50_m.png","image_value_thumb":"http://tonkaperfumes.lo/image/cache/catalog/bazar_50_m-100x100.png","option_value_id":"64","name":"Матовая","image":"http://tonkaperfumes.lo/image/cache/catalog/shids/mate-714x550-500x500.png","price":false,"master_option_value":"49","quantity":"9999","price_prefix":"+","master_option":"13"},{"product_option_value_id":"49","image_value_default":"","image_value_default_thumb":"","image_value":"catalog/bazar_220_g.png","image_value_thumb":"http://tonkaperfumes.lo/image/cache/catalog/bazar_220_g-100x100.png","option_value_id":"63","name":"Глянцевая","image":"http://tonkaperfumes.lo/image/cache/catalog/shids/glamur-714x550-500x500.png","price":false,"master_option_value":"50","quantity":"9999","price_prefix":"+","master_option":"13"},{"product_option_value_id":"48","image_value_default":"","image_value_default_thumb":"","image_value":"catalog/bazar_50_g.png","image_value_thumb":"http://tonkaperfumes.lo/image/cache/catalog/bazar_50_g-100x100.png","option_value_id":"63","name":"Глянцевая","image":"http://tonkaperfumes.lo/image/cache/catalog/shids/glamur-714x550-500x500.png","price":false,"master_option_value":"49","quantity":"9999","price_prefix":"+","master_option":"13"}],"option_id":"18","name":"Материал шильдика","type":"radio","value":"","master_option":"13","required":"0"},{"product_option_id":"331","product_option_value":[{"product_option_value_id":"189","image_value_default":"","image_value_default_thumb":"","image_value":"","image_value_thumb":"","option_value_id":"74","name":{"name":"Manege","fontFamily":"Manege","src":"/_html/app/fonts/constructor/Manege/style.css"},"image":"http://tonkaperfumes.lo/image/cache/no_image-500x500.png","price":false,"master_option_value":"0","quantity":"0","price_prefix":"+","master_option":"0"},{"product_option_value_id":"188","image_value_default":"","image_value_default_thumb":"","image_value":"","image_value_thumb":"","option_value_id":"75","name":{"name":"Roboto Bold","fontFamily":"Roboto","fontWeight":"700"},"image":"http://tonkaperfumes.lo/image/cache/no_image-500x500.png","price":false,"master_option_value":"0","quantity":"0","price_prefix":"+","master_option":"0"},{"product_option_value_id":"187","image_value_default":"","image_value_default_thumb":"","image_value":"","image_value_thumb":"","option_value_id":"76","name":{"name":"Roboto","fontFamily":"Roboto","fontWeight":"300"},"image":"http://tonkaperfumes.lo/image/cache/no_image-500x500.png","price":false,"master_option_value":"0","quantity":"0","price_prefix":"+","master_option":"0"},{"product_option_value_id":"186","image_value_default":"","image_value_default_thumb":"","image_value":"","image_value_thumb":"","option_value_id":"77","name":{"name":"Allegretto","fontFamily":"AllegrettoScriptOne","src":"/_html/app/fonts/constructor/Allegretto/style.css"},"image":"http://tonkaperfumes.lo/image/cache/no_image-500x500.png","price":false,"master_option_value":"0","quantity":"0","price_prefix":"+","master_option":"0"}],"option_id":"20","name":"Шрифт","type":"radio","value":"","master_option":"0","required":"0"},{"product_option_id":"254","option_id":"21","name":"Текст на шильдике","type":"text","value":"","master_option":"0","master_option_value":"0","required":"0"}]')
</script>

<div id="item-app" class="tonka-product-item">

    <div class="container">

        <div class="tonka-product-item__about">
            <div class="tonka-product-item__about-block">

                <div class="tonka-product-item__about_disktop">
                    <nav class="tonka-product-item__about-nav">
                        <a>ПРОДУКЦИЯ tonka</a> / <a>свечи</a>
                    </nav>

                    <div class="tonka-product-item__about-block-info">
                        <h1 class="tonka-product-item__header">altai</h1>
                    </div>
                </div>

                <div class="tonka-product-item__about-block-info">
                    <span class="tonka-product-item__about-block-header">
                        аромат
                    </span>
                    <p class="tonka-product-item__about-text">
                        Насыщенный, глубокий, тягучий аромат, вдохновлённый детским воспоминанием о путешествии на
                        Алтай. Прохлада горных хребтов, треск сосновых иголок под ногами, солнечный, тёплый, осенний
                        день среди хвойного леса, на берегу лазурной горной реки. Душистая смола горноалтайского кедра и
                        пихты, цветочные, чуть медовые нотки герани, розы и табака, как яркое воспоминание о встрече с
                        лазурной Катунью, стали сердцем и душой этого аромата.
                    </p>
                </div>

                <div class="tonka-product-item__about-block-info">
                    <span class="tonka-product-item__about-block-header">
                        Ноты
                    </span>
                    <p class="tonka-product-item__about-text">
                        Бергамот из Амальфи, Японская мята монарда, Базилик, Грасская роза, Техасский кедр
                    </p>
                </div>

                <div class="tonka-product-item__about-block-info">
                    <div class="userpic">
                        <div class="userpic-list">
                            <div class="userpic-item active">
                                <img src="images/dest/userpic/user.jpg" alt="" class="userpic-item__image">
                            </div>
                        </div>

                        <div class="userpic-name">
                            Наталия цетто
                        </div>

                        <div class="userpic-text">
                            Создает ароматы для таких брендов, как Dolce&amp;Gabbana, Dior, Tom&nbsp;Ford, Kenzo,
                            Burberry.
                        </div>
                    </div>
                </div>
            </div>

            <div class="tonka-product-item__option-block" v-if="itemWraps">
                <div class="tonka-product-item__option-header">
                    выбор упаковки
                </div>
                <div class="tonka-product-item__options-grid">
                    <label class="u-radio-image"
                           v-if="doesTheParentAllow(wrap)"
                           v-for="wrap in itemWraps.product_option_value">
                        <input name="wrap-radio" type="radio" :value="wrap" v-model="itemWraps.value">
                        <div class="mark" v-bind:style="{ backgroundImage: 'url('+wrap.image+')'}"></div>
                        <div class="">{{ wrap.name }}</div>
                    </label>
                </div>
            </div>

            <div class="tonka-product-item__option-block" v-if="itemCards">
                <div class="tonka-product-item__option-header">
                    выбор открытки
                </div>

                <label class="u-radio" v-for="card in itemCards.product_option_value">
                    <input name="card-radio" type="radio" :value="card" v-model="itemCards.value">
                    <div class="mark"></div>
                    <div class="">{{ card.name }}</div>
                </label>

            </div>

            <div class="tonka-product-item__option-block" v-if="itemMaterials">
                <div class="tonka-product-item__option-header">
                    выбор таблички
                </div>
                <label class="u-radio"
                       v-if="doesTheParentAllow(material)"
                       v-for="material in itemMaterials.product_option_value">
                    <input name="shield-radio" type="radio" :value="material" v-model="itemMaterials.value">
                    <div class="mark"></div>
                    <div class="">{{ material.name }}</div>
                </label>

            </div>

            <div class="tonka-product-item__option-block">
                <div class="tonka-product-item__option-header">
                    выбор дизайна
                </div>
                <label class="u-radio">
                    <input name="desing-radio" :value="false" v-model="itemFonts.value" type="radio">
                    <div class="mark"></div>
                    <div class="">логотип tonka</div>
                </label>

                <div class="tonka-product-item__option-sub-header" v-if="itemFonts">
                    шрифт
                </div>
                <label class="u-radio" v-if="itemFonts" v-for="font in itemFonts.product_option_value">
                    <input name="desing-radio" :value="font" v-model="itemFonts.value" type="radio">
                    <div class="mark"></div>
                    <div class="">{{ font.name.name }}</div>
                </label>
            </div>

            <div class="tonka-product-item__input" v-for="(string, key) in itemText.strings">
                <input type="text" v-model="string.value" placeholder="введите надпись">
                <div @click="removeTextString(key)" v-if="string.canBeDelete"
                     class="tonka-product-item__input-remove">
                </div>
            </div>

            <div class="tonka-product-item__add-row" @click="addTextString(true)" v-if="viewAddStringBtn()">
                <div class="tonka-product-item__add-icon"></div>
                добавить строку
            </div>

        </div>

        <div id="constructor" class="tonka-product-item__constructor">
            <div class="tonka-constructor">
                <div class="tonka-constructor__preview">
                    <div id="imageLayer" class="tonka-constructor__image">
                        <div  class="tonka-constructor__layer">
                            <img v-bind:src="getConstructorProductImage()">
                        </div>
                        <div class="tonka-constructor__layer">
                            <div class="tonka-constructor__text" :style="getStyleText()">
                                <span v-for="string of getStringsOfText()">{{ string.value }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="tonka-constructor__volumes">
                        <label class="u-radio" v-for="volume in itemVolumes.product_option_value">
                            <input name="card-radio" :value="volume" v-model="itemVolumes.value" type="radio">
                            <div class="mark"></div>
                            <div class="">{{ volume.name }}</div>
                        </label>
                    </div>
                </div>
                <div class="tonka-constructor__progress">
                    <div class="tonka-constructor__mobile">

                    </div>
                    <div class="tonka-constructor__desktop">
                        <ul class="tonka-constructor__scrolspy">
                            <li v-if="itemVolumes.value">Размер <span>{{ itemVolumes.value.name }}</span></li>
                            <li v-if="itemWraps.value">упаковка <span>{{ itemWraps.value.name }}</span></li>
                            <li v-if="itemCards.value">открытка <span>{{ itemCards.value.name }}</span></li>
                            <li v-if="itemMaterials.value">табличка <span>{{ itemMaterials.value.name }}</span></li>
                            <li>мой дизайн <span>{{ getDesingName() }}</span></li>
                        </ul>
                        <div class="tonka-constructor__price-block">
                            <label class="u-checkbox">
                                <input v-model="allRight"type="checkbox">
                                <div class="mark"></div>
                                <div class="">все проверено</div>
                            </label>
                            <div class="tonka-constructor__price">{{ getFullPrice() }}</div>
                        </div>
                        <div class="tonka-constructor__bonus-per-buy">
                            100 балов
                        </div>

                        <div class="tonka-constructor__count">
                            <div class="tonka-constructor__left">количество</div>
                            <div class="tonka-constructor__right">
                                <button @click="addQuantity(-1)">-</button>
                                <span>{{ quantity }}</span>
                                <button @click="addQuantity(1)">+</button>
                            </div>
                        </div>

                        <button @click="doOrder()" class="tonka-constructor__add-to-cart-btn">
                            в корзину
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="tonka-product-item__about_mobile">
            <nav class="tonka-product-item__about-nav">
                <a>ПРОДУКЦИЯ tonka</a> / <a>свечи</a>
            </nav>

            <div class="tonka-product-item__about-block-info">
                <h1 class="tonka-product-item__header">altai</h1>
            </div>
        </div>
    </div>
</div>
